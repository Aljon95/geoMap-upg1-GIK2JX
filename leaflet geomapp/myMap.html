<!DOCTYPE html>
<html>

<head>
    //style imports
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <link rel="stylesheet" href="/leaflet geomapp/src/L.Control.Sidebar.css">
    <link rel="stylesheet" href="/leaflet geomapp/polyline/Leaflet.PolylineMeasure.css">

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    //src imports
    <script src="/leaflet geomapp/GeoJson/sweden.js"></script>
    <script src="/leaflet geomapp/GeoJson/russia.js"></script>
    <script src="/leaflet geomapp/GeoJson/gasstations.js"></script>
    <script src="/leaflet geomapp/GeoJson/myVector.js"></script>
    <script src="src/L.Control.Sidebar.js"></script>
    <script src="/leaflet geomapp/GeoJson/schools.js"></script>
    <script src="/leaflet geomapp/polyline/Leaflet.PolylineMeasure.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>geomap</title>
</head>

<body>
    //nav buttons
    <nav id="mapnav">
        <div id="side-bar">
            <button id="task_1" href="#" data-zoom="10" data-position="60.640016, 15.294317">Task 1</button>
            <button id="task_2" href="#" data-zoom="13" data-position="58.40396964605505, 13.85556341894664">Task 2</button>
            <button id="task_3" href="#" data-zoom="12" data-position="60.605866810126194, 15.628008842468262">Task 3</button>
            <button id="task_4" href="#" data-zoom="12" data-position="60.605866810126194, 15.628008842468262">Task 4</button>

        </div>
    </nav>

    <div id="map">
        <a href="https://www.maptiler.com" style="position: absolute; left: 10px; bottom: 10px; z-index: 999"><img src="https://api.maptiler.com/resources/logo.svg" alt="MapTiler logo" /></a>
    </div>
    <p>
        <a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a
      >
      <a href="https://www.openstreetmap.org/copyright" target="_blank"
        >© OpenStreetMap contributors</a
      >
    </p>
    <div id="sidebar"><h1>leaflet-sidebar</h1></div>
    //map import
    <script>
var geoJsonLayer = L.geoJson(school, {
    
    // Executes on each feature in the dataset
    onEachFeature: function (featureData, featureLayer) {
      console.log("hello world");
      // featureData contains the actual feature object
      // featureLayer contains the indivual layer instance
      featureLayer.on('click', function () {
        // Fires on click of single feature
        console.log('Clicked feature layer ID: ' + featureData.id);
      });
    }
  }).on('click', function () {
      // Fires on each feature in the layer
      console.log('Clicked GeoJSON layer');
  });
      var map = L.map("map").setView([58.605866810126194, 15.628008842468262], 6);
      L.tileLayer(
        "https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=YZ3aRQEeI3XnEEKdsFiQ",
        {
          tileSize: 512,
          zoomOffset: -1,
          minZoom: 1,
          attribution:
            '\u003ca href="https://www.maptiler.com/copyright/" target="_blank"\u003e\u0026copy; MapTiler\u003c/a\u003e \u003ca href="https://www.openstreetmap.org/copyright" target="_blank"\u003e\u0026copy; OpenStreetMap contributors\u003c/a\u003e',
          crossOrigin: true,
        },
        geoJsonLayer
      ).addTo(map);
      var sidebar = L.control.sidebar('sidebar', {position: 'left'});
      map.addControl(sidebar);
      sidebar.show();

      var LeafletIcon = L.Icon.extend({
        options: {
          iconSize: [38, 95],
          iconAnchor: [22, 94],
          popupAnchor: [-3, -76],
        },
      });
      //icon
      var greenIcon = new LeafletIcon({ iconUrl: "pictures/leaf-green.png" });
      var marker = L.marker([60.630946, 15.354812], { icon: greenIcon }).addTo(
        map
      );
      var polyline = L.polyline([[ 60.739092, 15.440673 ],[ 60.660125, 15.314532 ],]).addTo(map);
      var polygon = L.polygon([
        [60.60643086487198, 15.618589369928078],
        [60.48023798987668, 15.436571158632077],
        [60.72619731505316, 15.00311211023543],
      ]).addTo(map);

      marker.bindPopup("<b> This belongs to task One.").openPopup();
      polyline.bindPopup("<b> hej").openPopup();
      polygon.bindPopup("<b> hej, jag är en trekant").openPopup();

     L.geoJSON(myGeoJSON).addTo(map);

      L.control
        .scale({
          metric: true,
          imperial: false,
          position: "topright",
        })
        .addTo(map);
        //vector import
      var v = myGeoJSON;
      L.geoJSON(myGeoJSON).addTo(map);
      //swe region import
      //var s = sweden;
      //L.geoJSON(sweden).addTo(map);
      //russia region import
      //var r = russia;
      //L.geoJSON(russia).addTo(map);
      //gasstation stockholm import
      var g = gas;
      L.geoJSON(gas).addTo(map);

      var skola = school;
      L.geoJSON(school).addTo(map);

      var layerOsm = new L.TileLayer('https://{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
            subdomains: ['server', 'services'],
            maxZoom: 19,
            noWrap: false,
            attribution: '<a href="https://www.arcgis.com/">ArcGIS</a>'
        });
        
        let polylineMeasure = L.control.polylineMeasure({
            position: 'topleft',
            unit: 'kilometres',
            showBearings: true,
            clearMeasurementsOnStop: false,
            showClearControl: true,
            showUnitControl: true
        })
        polylineMeasure.addTo(map);
      



      document.getElementById('task_1').onclick = function(data) {
        var pos = data.target.getAttribute('data-position');
        var zoom = data.target.getAttribute('data-zoom');
        if (pos && zoom) {
            var locat = pos.split(',');
            var zoo = parseInt(zoom);
            map.setView(locat, zoo, {animation: true});
            return false;
        }
    }
    document.getElementById('task_2').onclick = function(data) {
        var pos = data.target.getAttribute('data-position');
        var zoom = data.target.getAttribute('data-zoom');
        if (pos && zoom) {
            var locat = pos.split(',');
            var zoo = parseInt(zoom);
            map.setView(locat, zoo, {animation: true});
            return false;
        }
    }
    document.getElementById('task_3').onclick = function(data) {
        var pos = data.target.getAttribute('data-position');
        var zoom = data.target.getAttribute('data-zoom');
        if (pos && zoom) {
            var locat = pos.split(',');
            var zoo = parseInt(zoom);
            map.setView(locat, zoo, {animation: true});
            return false;
        }
    }
    document.getElementById('task_4').onclick = function(data) {
        var pos = data.target.getAttribute('data-position');
        var zoom = data.target.getAttribute('data-zoom');
        if (pos && zoom) {
            var locat = pos.split(',');
            var zoo = parseInt(zoom);
            map.setView(locat, zoo, {animation: true});
            return false;
        }
    }
    </script>
  </body>
</html>